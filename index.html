<!DOCTYPE html>
<html lang="es">
<head>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-GYVVFP8XCK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-GYVVFP8XCK');
</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo de Productos - Irenis Mendoza</title>
    <style>
        :root{--primary-color:#007bff;--secondary-color:#25D366;--background-color:#f4f4f9;--text-color:#333;--card-bg-color:#fff;--border-color:#ddd}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;margin:0;padding:10px;background-color:var(--background-color);color:var(--text-color)}h1{text-align:center;margin-bottom:15px;margin-top:0;font-size:24px}h2{font-size:20px;color:#555;border-bottom:2px solid var(--primary-color);padding-bottom:5px;margin-bottom:10px}h3{font-size:18px;color:#0056b3}.container{display:flex;gap:15px;align-items:flex-start}.left-panel{flex:3 1 700px;display:flex;flex-direction:column}.controls-panel{flex-shrink:0}.right-panel{flex:1 1 280px;position:sticky;top:10px;display:flex;flex-direction:column;gap:15px}.cart-container{background-color:#e9f5ff;padding:15px;border-radius:8px;border:1px solid #bde0fe}.contact-info{padding:15px;background-color:var(--card-bg-color);border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,.05)}.contact-info h3{margin-top:0;margin-bottom:10px;font-size:16px;text-align:center}.contact-info p{margin:6px 0;font-size:14px;line-height:1.5;text-align:center}.contact-info a{color:var(--primary-color);text-decoration:none}.contact-info a:hover{text-decoration:underline}.contact-info hr{border:none;border-top:1px solid var(--border-color);margin:10px 0}.category-container{background-color:var(--card-bg-color);padding:15px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,.1);margin-bottom:15px}#searchInput{width:100%;padding:12px;border:1px solid #ccc;border-radius:5px;background-color:var(--card-bg-color);font-size:16px;box-sizing:border-box;margin-bottom:10px}#categoryCheckboxes,#brandCheckboxes{display:flex;flex-wrap:wrap;gap:8px;padding-top:5px}.category-checkbox-item{display:block}.category-checkbox-item input[type=checkbox]{display:none}.category-checkbox-item span{display:block;padding:4px 15px;background-color:#e9ecef;border:1px solid #ced4da;border-radius:20px;cursor:pointer;font-size:14px;-webkit-user-select:none;user-select:none;transition:background-color .2s,color .2s,border-color .2s}.category-checkbox-item span:hover{background-color:#dee2e6}.category-checkbox-item input:checked+span{background-color:var(--primary-color);color:#fff;border-color:var(--primary-color)}.products-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.products-header label{font-size:20px;color:#555;font-weight:400;margin:0;padding-bottom:5px;border-bottom:2px solid var(--primary-color)}#sortPriceBtn{padding:8px 12px;font-size:14px;border:1px solid #ccc;background-color:#f8f9fa;border-radius:5px;cursor:pointer;transition:background-color .2s,border-color .2s;white-space:nowrap}#sortPriceBtn:hover{background-color:#e9ecef}#sortPriceBtn.active{background-color:var(--primary-color);color:#fff;border-color:var(--primary-color)}.table-wrapper{border-radius:8px;overflow:hidden}.product-table{width:100%;border-collapse:collapse;background-color:var(--card-bg-color)}.product-table td,.product-table th{border:1px solid var(--border-color);padding:10px;text-align:left;vertical-align:middle}.product-table th{background-color:var(--primary-color);color:#fff;font-size:14px;text-align:center}.product-table td{font-size:15px}.product-table tr:nth-child(even){background-color:#f8f9fa}.quantity-control{display:flex;align-items:center;justify-content:center}.quantity-btn{background-color:#e9ecef;border:1px solid #ced4da;color:#495057;cursor:pointer;font-size:1.2rem;font-weight:700;width:30px;height:30px;line-height:28px;text-align:center;-webkit-user-select:none;user-select:none}.quantity-btn:hover{background-color:#dee2e6}.decrease-btn{border-radius:4px 0 0 4px}.increase-btn{border-radius:0 4px 4px 0}.quantity-input{width:45px;height:28px;padding:5px;text-align:center;border:1px solid #ced4da;border-left:none;border-right:none;border-radius:0;-moz-appearance:textfield}.quantity-input::-webkit-inner-spin-button,.quantity-input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.price-cell{font-weight:700;color:#2a9d8f}#whatsappBtn{background-color:var(--secondary-color);color:#fff;width:100%;border:none;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;margin-top:10px}#whatsappBtn:hover{background-color:#1da851}#cartList{list-style-type:none;padding-left:0;max-height:250px;overflow-y:auto}#cartList li{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;border-bottom:1px solid #ccc;padding-bottom:5px;font-size:14px}#totalPrice{margin-top:15px;font-size:18px;font-weight:700;text-align:right}.remove-item-btn{background:0 0;border:none;color:#dc3545;cursor:pointer;font-weight:700;font-size:16px;padding:5px}.remove-item-btn:hover{color:#a71d2a}#clearCartBtn{background-color:#6c757d;color:#fff;width:100%;border:none;padding:8px 15px;font-size:14px;border-radius:5px;cursor:pointer;margin-top:10px}#clearCartBtn:hover{background-color:#5a6268}footer{display:none}@media (max-width:768px){body{overflow:auto;padding:10px}h1{font-size:20px}.container{flex-direction:column-reverse;height:auto;gap:15px}.left-panel,.right-panel{flex:1 1 100%;width:100%;height:auto}.right-panel{flex-direction:column-reverse;position:static}.table-wrapper{overflow-y:visible}.product-table thead{display:none}.product-table tr{display:block;margin-bottom:15px;border:1px solid var(--border-color);border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);padding:10px}.product-table tr:nth-child(even){background-color:var(--card-bg-color)}.product-table td{display:flex;justify-content:space-between;align-items:center;text-align:right;font-size:15px;border:none;border-bottom:1px dotted #ccc;padding:8px 8px 8px 0;position:relative}.product-table td:last-child{border-bottom:0}.product-table td::before{content:attr(data-label);text-align:left;font-weight:700;position:static;width:auto}.quantity-control{justify-content:flex-end}#cartList{max-height:none}}
    </style>
</head>
<body>
    <h1>Cat√°logo Interactivo de Productos</h1>
    <div class="container">
        <div class="left-panel"><div class="controls-panel"><div class="category-container"><h2>Filtro de categorias</h2><div id="categoryCheckboxes"></div></div><div class="category-container"><h2>Filtro de marcas</h2><div id="brandCheckboxes"></div></div><div class="products-header"><label for="searchInput">Escribe el nombre del producto que buscas</label><button id="sortPriceBtn">Ordenar por precio</button></div><input type="text" id="searchInput" placeholder="üîç Buscar por nombre, marca, categor√≠a o una combinaci√≥n de estos..."></div><div class="table-wrapper"><table class="product-table"><thead><tr><th>Nombre producto</th><th>Categor√≠a</th><th>Marca</th><th>Valor unitario</th><th>Cantidad</th><th>Total a pagar</th></tr></thead><tbody id="productTableBody"></tbody></table></div></div><div class="right-panel"><div class="cart-container"><h3>üõí Carrito de Compras</h3><ul id="cartList"><li>El carrito est√° vac√≠o.</li></ul><div id="totalPrice">Total: 0</div><button id="clearCartBtn">Vaciar Carrito</button><button id="whatsappBtn">Comprar por WhatsApp</button></div><div class="contact-info"><h3>‚ú® Contacto y Ubicaci√≥n ‚ú®</h3><p>üì± WhatsApp y llamadas: <a href="#" id="contactWhatsappLink">3042088961</a></p><p>üìç Ubicaci√≥n: Estamos en Santa Marta. ¬°Hacemos env√≠os a toda Colombia y pagos contra entrega en Santa Marta!</p><p>üó∫Ô∏è Vis√≠tanos (GPS): <a href="https://maps.google.com/?q=11.244833370782679,-74.19066001689564" target="_blank" rel="noopener noreferrer">Ver en Google Maps</a></p><hr><h3>üåê ¬°S√≠guenos en Nuestras Redes! üåê</h3><p>üëç <a href="https://www.facebook.com/marketplace/profile/100084865295132" target="_blank" rel="noopener noreferrer">Facebook</a></p><p>üì∏ <a href="https://www.instagram.com/irenismb_stocknaturasm" target="_blank" rel="noopener noreferrer">Instagram</a></p><p>üéµ <a href="https://www.tiktok.com/@irenismbstocknatura" target="_blank" rel="noopener noreferrer">TikTok</a></p></div></div>
    </div>
    <footer></footer>

<script>
    // URL de la hoja de c√°lculo de Google Sheets publicada como CSV.
    const googleSheetURL = 'https://docs.google.com/spreadsheets/d/1DAYfvMDJpIbIllLI07g9OMMr__JFBkHOwX4gzlWwTpg/pub?output=csv';

    // Se definen las variables globales.
    let products = [];
    const categoryCheckboxesContainer = document.getElementById('categoryCheckboxes');
    const brandCheckboxesContainer = document.getElementById('brandCheckboxes');
    const searchInput = document.getElementById('searchInput');
    const productTableBody = document.getElementById('productTableBody');
    const cartList = document.getElementById('cartList');
    const totalPriceElement = document.getElementById('totalPrice');
    const whatsappBtn = document.getElementById('whatsappBtn');
    const clearCartBtn = document.getElementById('clearCartBtn');
    const contactWhatsappLink = document.getElementById('contactWhatsappLink');
    const sortPriceBtn = document.getElementById('sortPriceBtn');
    let cart = {};
    let currentSortOrder = 'default';

    // Usamos fetch para traer los datos de la URL.
    fetch(googleSheetURL)
        .then(response => {
            if (!response.ok) {
                throw new Error('Error en la red o al acceder a la URL. ¬øEst√° publicada la hoja como CSV?');
            }
            return response.text();
        })
        .then(csvText => {
            const rows = csvText.trim().split('\n').slice(1);
            products = rows.map(row => {
                const columns = row.split(',');
                return {
                    name: columns[0] ? columns[0].trim() : '',
                    category: columns[1] ? columns[1].trim() : '',
                    marca: columns[2] ? columns[2].trim() : '',
                    valor_unitario: parseInt(columns[3], 10) || 0
                };
            }).filter(p => p.name);

            initializeApp(); // Inicia la aplicaci√≥n una vez que los productos est√°n cargados.
        })
        .catch(error => {
            console.error('Error al cargar los productos:', error);
            productTableBody.innerHTML = `<tr><td colspan="6" style="text-align:center;">Error al cargar productos. Por favor, verifica que la hoja de c√°lculo est√© "Publicada en la web" como CSV.</td></tr>`;
        });

    function initializeApp() {
        const brandOrder = {'Natura':1,'Avon':2,'Esika':3},categoryOrder={'Perfumes femeninos':1,'Perfumes masculinos':2,'Perfumes unisex':3,Colonias:4,'Combos perfumes':5,Regalos:6,'Combos regalos':7,'Combos cuidado corporal':8,'Cremas hidratantes corporales':9,'Combos cuidado capilar':10,Jabones:11,'Cremas hidratantes para manos':12,'Cuidado capilar':13,Bloqueadores:14,'Cuidado facial':15,'Combos cuidado facial':16,'Desodorantes y antitranspirantes':17,Exfoliantes:18,Maquillaje:19,Aceites:20,'Cremas y b√°lsamos para afeitar':21,'Cuidado del bebe':22,'Cuidado intimo':23};products.sort((a,b)=>{const o=brandOrder[a.marca]||99,r=brandOrder[b.marca]||99;if(o!==r)return o-r;const t=categoryOrder[a.category]||999,d=categoryOrder[b.category]||999;return t!==d?t-d:a.name.localeCompare(b.name)});const savedCart=localStorage.getItem("shoppingCart");if(savedCart)try{cart=JSON.parse(savedCart)||{}}catch(a){console.error("Error:",a),cart={}}const categories=["Todas",...[...new Set(products.map(a=>a.category))].sort()],brands=["Todas",...[...new Set(products.map(a=>a.marca))].sort()],currencyFormatter=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0});function normalizeText(a){return a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function filterAndDisplayProducts(){let a=[...products];const b=Array.from(document.querySelectorAll("#categoryCheckboxes input:checked")).map(a=>a.value);b.length>0&&!b.includes("Todas")&&(a=a.filter(a=>b.includes(a.category)));const c=Array.from(document.querySelectorAll("#brandCheckboxes input:checked")).map(a=>a.value);c.length>0&&!c.includes("Todas")&&(a=a.filter(a=>c.includes(a.marca)));const d=normalizeText(searchInput.value).split(/\s+/).filter(a=>a);d.length>0&&(a=a.filter(a=>{const b=normalizeText(`${a.name} ${a.category} ${a.marca}`);return d.every(a=>b.includes(a))})),"asc"===currentSortOrder?a.sort((a,b)=>a.valor_unitario-b.valor_unitario):"desc"===currentSortOrder&&a.sort((a,b)=>b.valor_unitario-a.valor_unitario),displayProducts(a)}function displayProducts(a){productTableBody.innerHTML="",0===a.length?productTableBody.innerHTML='<tr><td colspan="6" style="text-align:center; padding-left: 10px;">No se encontraron productos.</td></tr>':a.forEach(a=>{const b=document.createElement("tr"),c=cart[a.name]?cart[a.name].quantity:0,d=c*a.valor_unitario;b.innerHTML=`\n                <td data-label="Producto">${a.name}</td>\n                <td data-label="Categor√≠a">${a.category}</td>\n                <td data-label="Marca">${a.marca}</td>\n                <td data-label="Valor Unit." class="price-cell">${currencyFormatter.format(a.valor_unitario)}</td>\n                <td data-label="Cantidad">\n                    <div class="quantity-control">\n                        <button type="button" class="quantity-btn decrease-btn">-</button>\n                        <input type="number" class="quantity-input" min="0" value="${c}" data-price="${a.valor_unitario}" data-name="${a.name}">\n                        <button type="button" class="quantity-btn increase-btn">+</button>\n                    </div>\n                </td>\n                <td data-label="Total a Pagar" class="price-cell total-pay">${currencyFormatter.format(d)}</td>\n            `,productTableBody.appendChild(b)})}function updateCart(){let a=0;const b=Object.values(cart);0===b.length?cartList.innerHTML="<li>El carrito est√° vac√≠o.</li>":cartList.innerHTML=b.map(b=>{const c=b.quantity*b.price;return a+=c,`<li>\n                    <span>${b.quantity} x ${b.name} (${currencyFormatter.format(c)})</span>\n                    <button class="remove-item-btn" data-name="${b.name}">X</button>\n                </li>`}).join(""),totalPriceElement.textContent=`Total: ${currencyFormatter.format(a)}`,localStorage.setItem("shoppingCart",JSON.stringify(cart))}productTableBody.addEventListener("input",a=>{if(a.target.classList.contains("quantity-input")){const b=a.target;let c=parseInt(b.value,10)||0;const d=b.dataset.name,e=parseFloat(b.dataset.price);c<0&&(c=0,b.value=0),b.closest("tr").querySelector(".total-pay").textContent=currencyFormatter.format(c*e),c>0?cart[d]={name:d,quantity:c,price:e}:delete cart[d],updateCart()}}),productTableBody.addEventListener("click",a=>{const b=a.target;if(b.classList.contains("quantity-btn")){const a=b.closest(".quantity-control"),c=a.querySelector(".quantity-input");let d=parseInt(c.value,10)||0;b.classList.contains("increase-btn")?d++:b.classList.contains("decrease-btn")&&d--,d<0&&(d=0),c.value=d,c.dispatchEvent(new Event("input",{bubbles:!0}))}}),populateCheckboxes(categoryCheckboxesContainer,categories),populateCheckboxes(brandCheckboxesContainer,brands),setupCheckboxListener(categoryCheckboxesContainer),setupCheckboxListener(brandCheckboxesContainer),searchInput.addEventListener("input",filterAndDisplayProducts),sortPriceBtn.addEventListener("click",()=>{("default"===currentSortOrder||"desc"===currentSortOrder?(currentSortOrder="asc",sortPriceBtn.textContent="Precio $‚Üì",sortPriceBtn.classList.add("active")):"asc"===currentSortOrder&&(currentSortOrder="desc",sortPriceBtn.textContent="Precio $‚Üë"),filterAndDisplayProducts()}),whatsappBtn.addEventListener("click",()=>{const a=Object.values(cart);if(0===a.length)return void alert("El carrito est√° vac√≠o. Por favor, a√±ade una cantidad a los productos que deseas comprar.");let b="Hola, deseo comprar los siguientes productos:\n\n",c=0;a.forEach(a=>{const d=a.quantity*a.price;b+=`- ${a.quantity} x *${a.name}* (${currencyFormatter.format(a.price)} c/u) - Subtotal: ${currencyFormatter.format(d)}\n`,c+=d}),b+=`\n*Total del pedido: ${currencyFormatter.format(c)}*`,openWhatsApp(b)}),contactWhatsappLink.addEventListener("click",a=>{a.preventDefault(),openWhatsApp("Hola, me interesan tus productos.")}),cartList.addEventListener("click",a=>{if(a.target.classList.contains("remove-item-btn")){const b=a.target.dataset.name;delete cart[b];const c=productTableBody.querySelector(`.quantity-input[data-name="${b}"]`);c?(c.value=0,c.dispatchEvent(new Event("input",{bubbles:!0}))):updateCart()}}),clearCartBtn.addEventListener("click",()=>{cart={},localStorage.removeItem("shoppingCart"),productTableBody.querySelectorAll(".quantity-input").forEach(a=>{parseInt(a.value)>0&&(a.value=0,a.dispatchEvent(new Event("input",{bubbles:!0})))}),updateCart()}),filterAndDisplayProducts(),updateCart();function populateCheckboxes(a,b){a.innerHTML=b.map(a=>`\n            <label class="category-checkbox-item">\n                <input type="checkbox" name="category" value="${a}" ${"Todas"===a?"checked":""}>\n                <span>${a}</span>\n            </label>\n        `).join("")}function setupCheckboxListener(a){a.addEventListener("change",b=>{const c=b.target;if("checkbox"!==c.type)return;const d=a.querySelector('input[value="Todas"]');"Todas"===c.value&&c.checked?a.querySelectorAll('input:not([value="Todas"])').forEach(a=>a.checked=!1):"Todas"!==c.value&&c.checked&&d&&(d.checked=!1),a.querySelector("input:checked")||!d||(d.checked=!0),filterAndDisplayProducts()})}function openWhatsApp(a){const b="573042088961",c=encodeURIComponent(a),d=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?`https://api.whatsapp.com/send?phone=${b}&text=${c}`:`https://web.whatsapp.com/send?phone=${b}&text=${c}`;window.open(d,"_blank")}
    }
</script>

</body>
</html>
